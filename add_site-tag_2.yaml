---

- name: run commands on Cisco IOS XE devices
  hosts: ios_xe
  gather_facts: no

  tasks:
    - name: Show wireless tag site summary
      cisco.ios.ios_command:
        commands: show wireless tag site summary | i "{{ sitetag_name }}"
      register: sitetag_output

    - name: configure sitetag
      cisco.ios.ios_config:
        lines: wireless tag site "{{ sitetag_name }}"
      register: output
      when: sitetag_output is search != ("{{ sitetag_name }}")
      
    - name: print output
      debug:
        var: output
